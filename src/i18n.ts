export type AppLanguage = 'it' | 'en';

export type TranslationParams = Record<string, string | number>;
export type Translator = (key: string, params?: TranslationParams) => string;

const translations: Record<AppLanguage, Record<string, string>> = {
  it: {
    app_name: 'Eventi e Gare',
    app_subtitle: 'Android + iOS | organizzatore + partecipante',
    loading_data: 'Caricamento dati...',
    home_select_user_type: 'Seleziona tipo utente',
    home_intro: "All'avvio scegli se operare come organizzatore o partecipante.",
    metric_total_events: 'Eventi totali',
    metric_total_registrations: 'Iscritti totali',
    enter_as_organizer: 'Entra come organizzatore',
    enter_as_participant: 'Entra come partecipante',
    included_features: 'Funzioni incluse',
    feature_1: '- Creazione eventi gratuiti o a quota.',
    feature_2: '- Commissione app 3% su iscrizioni con pagamento.',
    feature_3: '- Ricerca eventi per nome o localita.',
    feature_4: '- Report iscritti esportabile CSV in tempo reale locale.',
    feature_5: '- Moduli privacy e consenso conservazione dati.',
    legal_button: 'Disclaimer & Privacy',
    language_label: 'Lingua',
    language_it: 'Italiano',
    language_en: 'English',
    banner_ad_default: 'Banner pubblicitario sviluppatore: spazio sponsorizzabile.',
    banner_sponsor_prefix: 'Sponsor manifestazione: {sponsor}',
    interstitial_processing_title: 'Registrazione in corso',
    interstitial_processing_subtitle: 'Attendere {seconds}s...',
    interstitial_processing_fallback: 'Spazio sponsor locale disponibile',
    legal_title: 'Template privacy, economico e disclaimer',
    legal_p1:
      "1. Titolare trattamento: l'organizzatore evento e titolare dei dati raccolti. Lo sviluppatore dell'app agisce come fornitore tecnico.",
    legal_p2:
      '2. Base giuridica: consenso esplicito partecipante per iscrizione, conservazione dati, comunicazioni operative e adempimenti fiscali.',
    legal_p3:
      '3. Dati trattati: anagrafica partecipante, recapiti, eventuali dati pagamento, identificativo iscrizione e numero assegnato.',
    legal_p4:
      "4. Commissioni: per iscrizioni a pagamento e prevista una commissione tecnica del 3% sul valore della quota, tracciata nel report organizzatore.",
    legal_p5:
      '5. Eventi gratuiti: possono mostrare banner sponsor locali e interstiziale di fine iscrizione.',
    legal_p6:
      '6. Conservazione dati: definire policy temporale (es. 24 mesi) e procedura richiesta cancellazione/portabilita dati.',
    legal_p7:
      '7. Pagamenti: in produzione integrare PSP certificato (Stripe, Nexi, PayPal) e riconciliazione fiscale.',
    legal_p8:
      '8. Validazione legale: i testi sono base operativa e devono essere validati da consulente legale/privacy prima del rilascio pubblico.',
    close: 'Chiudi',
    free_done_title: 'Iscrizione completata',
    free_done_event: 'Evento: {event}',
    free_done_code: 'Codice: {code}',
    free_done_sponsor_fallback: 'Spazio sponsor locale disponibile',
    continue: 'Continua',
    organizer_access: 'Organizzatore: accesso',
    organizer_access_intro:
      'Inserisci email e dati fiscali. Se gestisci quote a pagamento, indica conto corrente/IBAN.',
    existing_organizers: 'Organizzatori gia presenti',
    iban_prefix: 'IBAN: {iban}',
    iban_missing: 'IBAN non inserito',
    email_required: 'Email *',
    fiscal_optional: 'Dati fiscali (opzionale)',
    fiscal_placeholder: 'P.IVA / CF / Ragione sociale',
    bank_label: 'Conto corrente / IBAN (per eventi a quota)',
    bank_placeholder: 'IT00X0000000000000000000000',
    save_organizer: 'Salva organizzatore',
    back_home: 'Torna alla home',
    create_event: 'Crea evento',
    organizer_label: 'Organizzatore: {email}',
    verification_status: 'Stato verifica pagamenti: {status}{payout}',
    payout_active: ' | Payout attivo',
    payout_inactive: ' | Payout non attivo',
    antifraud_only_free:
      'Antifrode attivo: puoi creare solo eventi gratuiti finche la verifica manuale non e completata.',
    event_name_required: 'Nome evento *',
    location_required: 'Luogo *',
    event_date_label: 'Data evento (AAAA-MM-GG o GG/MM/AAAA)',
    event_date_placeholder: '2026-04-21',
    free_event_switch: 'Evento gratuito',
    free_event_helper: 'Se disattivo, il partecipante paghera quota iscrizione.',
    fee_label: 'Quota iscrizione (EUR)',
    fee_placeholder: '25.00',
    commission_preview: 'Commissione sviluppatore app (3%): {value}',
    assign_numbers: 'Assegna numero partecipante automatico',
    logo_optional: 'Logo evento (URL opzionale)',
    sponsor_optional: 'Sponsor locale / banner (opzionale)',
    sponsor_placeholder: 'Sponsor locale: ...',
    sponsor_paid_section: 'Modulo sponsor a pagamento',
    sponsor_paid_intro:
      "Pacchetti sponsor giornalieri o multipli fino alla data evento. Genera link Stripe e condividilo con lo sponsor o paga direttamente.",
    sponsor_selected_event: 'Evento selezionato: {event}',
    sponsor_name_required: 'Nome sponsor *',
    sponsor_name_it_optional: 'Nome sponsor IT (opzionale)',
    sponsor_name_en_optional: 'Nome sponsor EN (opzionale)',
    sponsor_days_label: 'Durata pacchetto (giorni)',
    sponsor_amount_label: 'Importo sponsor (EUR)',
    sponsor_email_optional: 'Email sponsor (opzionale)',
    sponsor_url_optional: 'Sito sponsor (opzionale)',
    sponsor_logo_optional: 'Logo sponsor URL (opzionale)',
    sponsor_generate_checkout: 'Genera link Stripe sponsor',
    sponsor_slots_for_event: 'Slot sponsor evento',
    sponsor_no_slots: 'Nessuno slot sponsor creato per questo evento.',
    sponsor_slot_status: 'Stato: {status} | Active: {active}',
    sponsor_slot_period: 'Periodo: {from} - {to}',
    sponsor_slot_checkout_link: 'Checkout: {url}',
    sponsor_slot_contract_it: 'Contratto IT: {text}',
    sponsor_slot_contract_en: 'Contratto EN: {text}',
    sponsor_status_pending_payment: 'In attesa pagamento',
    sponsor_status_active: 'Attivo',
    sponsor_status_expired: 'Scaduto',
    sponsor_status_cancelled: 'Cancellato',
    sponsor_status_payment_failed: 'Pagamento fallito',
    sponsor_status_refunded: 'Rimborsato',
    sponsor_checkout_title: 'Checkout sponsor creato',
    sponsor_checkout_message:
      'Slot salvato in Supabase. Condividi questo link Stripe con lo sponsor:\n{url}',
    sponsor_checkout_fail_title: 'Errore checkout sponsor',
    sponsor_event_remote_missing:
      "Evento non sincronizzato su Supabase. Crea prima l'evento con sync attiva.",
    sponsor_amount_invalid: 'Importo sponsor non valido.',
    sponsor_days_invalid: 'Durata sponsor non valida.',
    privacy_module: 'Modulo privacy raccolta dati',
    publish_event: 'Pubblica evento',
    back_dashboard: 'Torna dashboard',
    organizer_dashboard: 'Dashboard organizzatore',
    account_label: 'Account: {email}',
    antifraud_status: 'Verifica antifrode: {status} | Payout {payout}',
    payout_blocked: 'bloccato',
    payout_enabled: 'attivo',
    risk_score: 'Risk score: {score}',
    risk_flags: 'Flag rischio: {flags}',
    paid_disabled:
      'Eventi a pagamento disabilitati finche il profilo non passa la verifica manuale.',
    created_events: 'Eventi creati',
    registered_users: 'Iscritti',
    gross_revenue: 'Incasso lordo',
    commissions_3: 'Commissioni 3%',
    create_new_event: 'Crea nuovo evento',
    your_events: 'I tuoi eventi',
    no_events: 'Nessun evento creato.',
    event_free: 'Gratuito',
    event_fee: 'Quota {fee}',
    subscribers_count: 'Iscritti: {count}',
    event_status_active: 'Stato: Attivo (ricerca attiva)',
    event_status_inactive: 'Stato: Disattivo',
    deactivate: 'Disattiva',
    activate: 'Attiva',
    export_csv: 'Esporta CSV',
    realtime_list: 'Lista iscritti in tempo reale',
    select_event_for_list: 'Seleziona un evento per vedere gli iscritti.',
    no_registrations_for_event: 'Ancora nessuna iscrizione per {event}.',
    code_number_line: 'Codice: {code}{number}',
    number_suffix: ' | Numero: {number}',
    registration_payment_state: 'Iscrizione: {reg} | Pagamento: {pay}',
    amount_commission: 'Importo: {amount} | Commissione: {commission}',
    payment_reference: 'Ref pagamento: {reference}',
    payment_intent_line: 'Payment intent: {id} ({status})',
    payment_error_reason: 'Motivo errore: {reason}',
    registration_date: 'Iscrizione: {date}',
    participant_search: 'Partecipante: ricerca eventi',
    participant_search_intro:
      'Cerca per nome/localita. Con ricerca attiva vedi solo eventi pubblicati come attivi.',
    search_name: 'Ricerca per nome evento',
    search_name_placeholder: 'Trail, maratona, torneo...',
    search_location: 'Ricerca per localita',
    search_location_placeholder: 'Torino, Asti...',
    active_search_only: 'Solo ricerca attiva',
    results: 'Risultati',
    no_results: 'Nessun evento trovato con i filtri attuali.',
    free_event_label: 'Evento gratuito',
    entry_fee_label: 'Quota iscrizione: {fee}',
    subscribe: 'Iscriviti',
    event_detail: 'Dettaglio evento',
    place_label: 'Luogo: {value}',
    date_label: 'Data: {value}',
    type_label: 'Tipo: {value}',
    free_type: 'Gratuito',
    paid_type: 'Quota {fee}',
    paid_pending_helper:
      'Le iscrizioni a pagamento restano in stato pending finche il pagamento non viene confermato.',
    participant_data: 'Dati partecipante',
    full_name_required: 'Nome e cognome *',
    phone_label: 'Telefono',
    city_label: 'Citta',
    birthdate_optional: 'Data nascita (opzionale)',
    birthdate_placeholder: 'GG/MM/AAAA',
    consent_privacy: 'Acconsento al trattamento dati per gestione iscrizione.',
    consent_retention: 'Acconsento alla conservazione dati secondo policy organizzatore.',
    confirm_free_registration: 'Conferma iscrizione gratuita',
    open_payment_session: 'Apri sessione pagamento',
    back_search: 'Torna alla ricerca',
    payment_title: 'Pagamento quota iscrizione',
    amount_label: 'Importo: {value}',
    registration_code_label: 'Codice iscrizione: {value}',
    registration_status_label: 'Stato iscrizione: {value}',
    payment_session_expiry: 'Scadenza sessione: {value}',
    payment_session_expired_reason: 'Sessione pagamento scaduta',
    payment_webhook_helper:
      'Il pagamento viene applicato tramite webhook idempotente e aggiorna la lista in tempo reale.',
    payment_method: 'Metodo pagamento',
    method_card: 'Carta',
    method_bank: 'Bonifico',
    method_cash: 'Contanti',
    method_other: 'Altro',
    payer_name: 'Nominativo pagatore',
    payment_reference_optional: 'Riferimento pagamento (opzionale)',
    payment_reference_placeholder: 'ID transazione / CRO',
    confirm_payment: 'Conferma pagamento',
    back_event_detail: 'Torna al dettaglio evento',
    cancel_pending_registration: 'Annulla iscrizione pending',
    invalid_email_title: 'Email non valida',
    invalid_email_message: 'Inserisci un indirizzo email valido.',
    email_already_registered_title: 'Email gia registrata',
    email_already_registered_message: 'Esiste gia un organizzatore con questa email.',
    organizer_created_title: 'Profilo organizzatore creato',
    organizer_created_message:
      'Stato antifrode: pending review. Eventi gratuiti consentiti, pagamenti bloccati fino a verifica.{note}',
    organizer_sync_ok: '\nProfilo sincronizzato con Supabase.',
    organizer_sync_fail: '\nSalvataggio Supabase non riuscito: {reason}',
    missing_data_title: 'Dati mancanti',
    missing_data_event_message: 'Nome evento e luogo sono obbligatori.',
    organizer_not_found_title: 'Organizzatore non trovato',
    organizer_not_found_message: 'Impossibile creare evento.',
    fee_missing_title: 'Quota mancante',
    fee_missing_message: 'Inserisci una quota di iscrizione maggiore di zero.',
    payments_disabled_title: 'Pagamenti non abilitati',
    payments_disabled_message:
      'Completare verifica antifrode prima di pubblicare eventi con quota.',
    event_created_title: 'Evento creato',
    event_created_message: 'Evento {name} creato correttamente.\n{note}',
    event_sync_local: 'Evento salvato solo in locale.',
    event_sync_ok: 'Evento sincronizzato con Supabase.',
    event_sync_fail: 'Sync Supabase non riuscita: {reason}',
    event_sync_org_missing:
      'Organizzatore non sincronizzato su Supabase. Crea un nuovo organizzatore o abilita login anonimo.',
    export_not_available_title: 'Esportazione non disponibile',
    file_generated_title: 'File generato',
    file_generated_message: 'CSV salvato in: {uri}',
    required_consents_title: 'Consensi obbligatori',
    required_consents_message: 'Devi accettare i moduli privacy e conservazione dati.',
    event_not_found_title: 'Evento non trovato',
    event_not_found_message: 'Evento non disponibile.',
    registration_completed_title: 'Iscrizione completata',
    registration_completed_message: 'Codice: {code}\n{number}{email}\n{sync}',
    number_assigned_line: 'Numero assegnato: {number}\n',
    email_simulated:
      'Conferma email in modalita simulata (configura webhook per invio automatico).',
    email_sent: 'Conferma email inviata al partecipante.',
    email_failed: 'Conferma email non inviata. {detail}',
    sync_ok_registration: 'Iscrizione sincronizzata su Supabase.',
    sync_local_registration: 'Iscrizione salvata solo in locale: {reason}',
    payment_not_available_title: 'Pagamento non disponibile',
    payment_not_available_message:
      "L'organizzatore non e verificato per ricevere pagamenti in sicurezza.",
    existing_pending_title: 'Sessione pagamento gia aperta',
    existing_pending_message:
      'Esiste gia una sessione pending per questa email. Prosegui con la sessione esistente.',
    sync_not_completed_title: 'Sync Supabase non completata',
    sync_not_completed_message:
      'La sessione pagamento e attiva in locale, ma non e stata salvata nel DB: {reason}',
    session_not_found_title: 'Sessione non trovata',
    session_not_found_message: 'Registrazione pending non disponibile.',
    payment_already_confirmed_title: 'Pagamento gia confermato',
    payment_already_confirmed_message: 'Questa iscrizione risulta gia pagata.',
    invalid_state_title: 'Stato non valido',
    invalid_state_message: 'La sessione non e piu pagabile. Stato attuale: {status}',
    payment_error_title: 'Errore pagamento',
    payment_intent_missing_message: 'Payment intent non collegato alla registrazione.',
    payment_intent_not_found_message: 'Payment intent non trovato.',
    payment_webhook_not_applied_title: 'Webhook pagamento non applicato',
    unknown_error: 'Errore sconosciuto.',
    update_error_title: 'Errore aggiornamento',
    update_error_message: 'Registrazione aggiornata non trovata.',
    payment_not_completed_title: 'Pagamento non completato',
    payment_not_completed_message: 'Esito: {status}. {reason}\n{sync}',
    retry_payment_reason: 'Riprovare con una nuova sessione pagamento.',
    sync_state_ok: 'Stato registrazione sincronizzato su Supabase.',
    sync_state_fail: 'Sync Supabase non riuscita: {reason}',
    payment_confirmed_title: 'Pagamento confermato',
    payment_confirmed_message:
      'Iscrizione registrata con successo.\nCodice: {code}\n{number}{email}\n{sync}',
    sync_paid_ok: 'Registrazione pagamento sincronizzata su Supabase.',
    registration_cancelled_title: 'Iscrizione annullata',
    registration_cancelled_message:
      'La sessione pending e stata annullata correttamente.\n{sync}',
    cancellation_sync_ok: 'Annullamento sincronizzato su Supabase.',
    fallback_organizer_not_found: 'Organizzatore non trovato. Torna alla selezione ruolo.',
    fallback_home: 'Torna alla home',
    fallback_dashboard_unavailable: 'Dashboard non disponibile. Organizzatore non trovato.',
    fallback_event_not_found: 'Evento non trovato. Effettua una nuova ricerca.',
    fallback_back_search: 'Torna a ricerca eventi',
    fallback_payment_unavailable: 'Pagamento non disponibile. Sessione non trovata.',
    supabase_auth_title: 'Supabase Auth',
    missing_payer_name_title: 'Dato mancante',
    missing_payer_name_message: 'Inserisci nominativo pagatore.',
    missing_registration_data_message: 'Inserisci almeno nome completo e email.',
    payments_blocked_title: 'Pagamenti bloccati',
    payments_blocked_unverified:
      'Organizzatore non verificato. Completa la verifica antifrode prima di creare eventi a quota.',
    iban_missing_title: 'IBAN mancante',
    iban_missing_message: 'Per eventi con quota inserisci IBAN nel profilo organizzatore.',
    payments_profile_blocked: 'Il profilo non e verificato per ricevere pagamenti.',
    verification_verified: 'Verificato',
    verification_pending_review: 'In revisione',
    verification_rejected: 'Rifiutato',
    verification_suspended: 'Sospeso',
    role_dashboard_unavailable:
      'Dashboard non disponibile. Organizzatore non trovato.',
    role_home_action: 'Torna alla home',
    sync_event_or_organizer_missing: 'Evento o organizzatore non trovati.',
  },
  en: {
    app_name: 'Eventi e Gare',
    app_subtitle: 'Android + iOS | organizer + participant',
    loading_data: 'Loading data...',
    home_select_user_type: 'Select user type',
    home_intro: 'At startup choose organizer or participant mode.',
    metric_total_events: 'Total events',
    metric_total_registrations: 'Total registrations',
    enter_as_organizer: 'Continue as organizer',
    enter_as_participant: 'Continue as participant',
    included_features: 'Included features',
    feature_1: '- Free or paid event creation.',
    feature_2: '- App commission 3% on paid registrations.',
    feature_3: '- Event search by name or location.',
    feature_4: '- Exportable CSV report with local real-time updates.',
    feature_5: '- Privacy and data retention consent forms.',
    legal_button: 'Disclaimer & Privacy',
    language_label: 'Language',
    language_it: 'Italian',
    language_en: 'English',
    banner_ad_default: 'Developer ad banner: sponsorship slot available.',
    banner_sponsor_prefix: 'Event sponsor: {sponsor}',
    interstitial_processing_title: 'Registration in progress',
    interstitial_processing_subtitle: 'Please wait {seconds}s...',
    interstitial_processing_fallback: 'Local sponsor slot available',
    legal_title: 'Privacy, financial and disclaimer template',
    legal_p1:
      '1. Data controller: the event organizer controls collected data. The app developer acts as technical provider.',
    legal_p2:
      '2. Legal basis: explicit participant consent for registration, data retention, operational communications and tax obligations.',
    legal_p3:
      '3. Processed data: participant profile, contacts, optional payment details, registration code and assigned number.',
    legal_p4:
      '4. Commissions: for paid registrations a 3% technical commission is applied on the fee amount, tracked in organizer reports.',
    legal_p5:
      '5. Free events: local sponsor banner and registration end interstitial may be displayed.',
    legal_p6:
      '6. Data retention: define retention policy (e.g. 24 months) and deletion/portability request process.',
    legal_p7:
      '7. Payments: in production integrate a certified PSP (Stripe, Nexi, PayPal) and fiscal reconciliation.',
    legal_p8:
      '8. Legal validation: these texts are an operational baseline and must be validated by a legal/privacy advisor before public release.',
    close: 'Close',
    free_done_title: 'Registration completed',
    free_done_event: 'Event: {event}',
    free_done_code: 'Code: {code}',
    free_done_sponsor_fallback: 'Local sponsor slot available',
    continue: 'Continue',
    organizer_access: 'Organizer: access',
    organizer_access_intro:
      'Enter email and tax details. If you manage paid entries, add bank account/IBAN.',
    existing_organizers: 'Existing organizers',
    iban_prefix: 'IBAN: {iban}',
    iban_missing: 'IBAN not provided',
    email_required: 'Email *',
    fiscal_optional: 'Tax details (optional)',
    fiscal_placeholder: 'VAT / TAX ID / Company name',
    bank_label: 'Bank account / IBAN (for paid events)',
    bank_placeholder: 'IT00X0000000000000000000000',
    save_organizer: 'Save organizer',
    back_home: 'Back to home',
    create_event: 'Create event',
    organizer_label: 'Organizer: {email}',
    verification_status: 'Payment verification: {status}{payout}',
    payout_active: ' | Payout enabled',
    payout_inactive: ' | Payout disabled',
    antifraud_only_free:
      'Anti-fraud active: only free events allowed until manual verification is completed.',
    event_name_required: 'Event name *',
    location_required: 'Location *',
    event_date_label: 'Event date (YYYY-MM-DD or DD/MM/YYYY)',
    event_date_placeholder: '2026-04-21',
    free_event_switch: 'Free event',
    free_event_helper: 'If disabled, participant will pay an entry fee.',
    fee_label: 'Entry fee (EUR)',
    fee_placeholder: '25.00',
    commission_preview: 'Developer commission (3%): {value}',
    assign_numbers: 'Auto-assign participant number',
    logo_optional: 'Event logo (optional URL)',
    sponsor_optional: 'Local sponsor / banner (optional)',
    sponsor_placeholder: 'Local sponsor: ...',
    sponsor_paid_section: 'Paid sponsor module',
    sponsor_paid_intro:
      'Daily or multi-day sponsor packages up to the event date. Generate Stripe link and share it with sponsor or pay directly.',
    sponsor_selected_event: 'Selected event: {event}',
    sponsor_name_required: 'Sponsor name *',
    sponsor_name_it_optional: 'Sponsor name IT (optional)',
    sponsor_name_en_optional: 'Sponsor name EN (optional)',
    sponsor_days_label: 'Package duration (days)',
    sponsor_amount_label: 'Sponsor amount (EUR)',
    sponsor_email_optional: 'Sponsor email (optional)',
    sponsor_url_optional: 'Sponsor website (optional)',
    sponsor_logo_optional: 'Sponsor logo URL (optional)',
    sponsor_generate_checkout: 'Generate sponsor Stripe link',
    sponsor_slots_for_event: 'Event sponsor slots',
    sponsor_no_slots: 'No sponsor slots created for this event.',
    sponsor_slot_status: 'Status: {status} | Active: {active}',
    sponsor_slot_period: 'Period: {from} - {to}',
    sponsor_slot_checkout_link: 'Checkout: {url}',
    sponsor_slot_contract_it: 'Contract IT: {text}',
    sponsor_slot_contract_en: 'Contract EN: {text}',
    sponsor_status_pending_payment: 'Pending payment',
    sponsor_status_active: 'Active',
    sponsor_status_expired: 'Expired',
    sponsor_status_cancelled: 'Cancelled',
    sponsor_status_payment_failed: 'Payment failed',
    sponsor_status_refunded: 'Refunded',
    sponsor_checkout_title: 'Sponsor checkout created',
    sponsor_checkout_message:
      'Slot saved in Supabase. Share this Stripe link with the sponsor:\n{url}',
    sponsor_checkout_fail_title: 'Sponsor checkout error',
    sponsor_event_remote_missing:
      'Event is not synced on Supabase. Create/sync the event first.',
    sponsor_amount_invalid: 'Invalid sponsor amount.',
    sponsor_days_invalid: 'Invalid sponsor duration.',
    privacy_module: 'Privacy data collection module',
    publish_event: 'Publish event',
    back_dashboard: 'Back to dashboard',
    organizer_dashboard: 'Organizer dashboard',
    account_label: 'Account: {email}',
    antifraud_status: 'Anti-fraud verification: {status} | Payout {payout}',
    payout_blocked: 'blocked',
    payout_enabled: 'enabled',
    risk_score: 'Risk score: {score}',
    risk_flags: 'Risk flags: {flags}',
    paid_disabled: 'Paid events disabled until manual verification is approved.',
    created_events: 'Created events',
    registered_users: 'Registered users',
    gross_revenue: 'Gross revenue',
    commissions_3: 'Commissions 3%',
    create_new_event: 'Create new event',
    your_events: 'Your events',
    no_events: 'No events created.',
    event_free: 'Free',
    event_fee: 'Fee {fee}',
    subscribers_count: 'Registered: {count}',
    event_status_active: 'Status: Active (search visible)',
    event_status_inactive: 'Status: Inactive',
    deactivate: 'Disable',
    activate: 'Enable',
    export_csv: 'Export CSV',
    realtime_list: 'Real-time registrations list',
    select_event_for_list: 'Select an event to view registrations.',
    no_registrations_for_event: 'No registrations yet for {event}.',
    code_number_line: 'Code: {code}{number}',
    number_suffix: ' | Number: {number}',
    registration_payment_state: 'Registration: {reg} | Payment: {pay}',
    amount_commission: 'Amount: {amount} | Commission: {commission}',
    payment_reference: 'Payment ref: {reference}',
    payment_intent_line: 'Payment intent: {id} ({status})',
    payment_error_reason: 'Error reason: {reason}',
    registration_date: 'Registration: {date}',
    participant_search: 'Participant: event search',
    participant_search_intro:
      'Search by name/location. With active search enabled you only see active events.',
    search_name: 'Search by event name',
    search_name_placeholder: 'Trail, marathon, tournament...',
    search_location: 'Search by location',
    search_location_placeholder: 'Turin, Asti...',
    active_search_only: 'Active events only',
    results: 'Results',
    no_results: 'No events found with current filters.',
    free_event_label: 'Free event',
    entry_fee_label: 'Entry fee: {fee}',
    subscribe: 'Register',
    event_detail: 'Event details',
    place_label: 'Location: {value}',
    date_label: 'Date: {value}',
    type_label: 'Type: {value}',
    free_type: 'Free',
    paid_type: 'Fee {fee}',
    paid_pending_helper:
      'Paid registrations remain pending until payment is confirmed.',
    participant_data: 'Participant data',
    full_name_required: 'Full name *',
    phone_label: 'Phone',
    city_label: 'City',
    birthdate_optional: 'Birth date (optional)',
    birthdate_placeholder: 'DD/MM/YYYY',
    consent_privacy: 'I consent to data processing for registration management.',
    consent_retention: 'I consent to data retention according to organizer policy.',
    confirm_free_registration: 'Confirm free registration',
    open_payment_session: 'Open payment session',
    back_search: 'Back to search',
    payment_title: 'Registration fee payment',
    amount_label: 'Amount: {value}',
    registration_code_label: 'Registration code: {value}',
    registration_status_label: 'Registration status: {value}',
    payment_session_expiry: 'Session expiry: {value}',
    payment_session_expired_reason: 'Payment session expired',
    payment_webhook_helper:
      'Payment is applied via idempotent webhook and updates list in real time.',
    payment_method: 'Payment method',
    method_card: 'Card',
    method_bank: 'Bank transfer',
    method_cash: 'Cash',
    method_other: 'Other',
    payer_name: 'Payer name',
    payment_reference_optional: 'Payment reference (optional)',
    payment_reference_placeholder: 'Transaction ID / CRO',
    confirm_payment: 'Confirm payment',
    back_event_detail: 'Back to event details',
    cancel_pending_registration: 'Cancel pending registration',
    invalid_email_title: 'Invalid email',
    invalid_email_message: 'Enter a valid email address.',
    email_already_registered_title: 'Email already registered',
    email_already_registered_message: 'An organizer with this email already exists.',
    organizer_created_title: 'Organizer profile created',
    organizer_created_message:
      'Anti-fraud status: pending review. Free events allowed, paid events blocked until verification.{note}',
    organizer_sync_ok: '\nProfile synced with Supabase.',
    organizer_sync_fail: '\nSupabase save failed: {reason}',
    missing_data_title: 'Missing data',
    missing_data_event_message: 'Event name and location are required.',
    organizer_not_found_title: 'Organizer not found',
    organizer_not_found_message: 'Unable to create event.',
    fee_missing_title: 'Missing fee',
    fee_missing_message: 'Enter a registration fee greater than zero.',
    payments_disabled_title: 'Payments not enabled',
    payments_disabled_message:
      'Complete anti-fraud verification before publishing paid events.',
    event_created_title: 'Event created',
    event_created_message: 'Event {name} created successfully.\n{note}',
    event_sync_local: 'Event saved locally only.',
    event_sync_ok: 'Event synced with Supabase.',
    event_sync_fail: 'Supabase sync failed: {reason}',
    event_sync_org_missing:
      'Organizer not synced on Supabase. Create a new organizer or enable anonymous login.',
    export_not_available_title: 'Export not available',
    file_generated_title: 'File generated',
    file_generated_message: 'CSV saved to: {uri}',
    required_consents_title: 'Required consents',
    required_consents_message: 'You must accept privacy and data retention forms.',
    event_not_found_title: 'Event not found',
    event_not_found_message: 'Event not available.',
    registration_completed_title: 'Registration completed',
    registration_completed_message: 'Code: {code}\n{number}{email}\n{sync}',
    number_assigned_line: 'Assigned number: {number}\n',
    email_simulated:
      'Confirmation email in simulated mode (configure webhook for automatic sending).',
    email_sent: 'Confirmation email sent to participant.',
    email_failed: 'Confirmation email not sent. {detail}',
    sync_ok_registration: 'Registration synced to Supabase.',
    sync_local_registration: 'Registration saved locally only: {reason}',
    payment_not_available_title: 'Payment not available',
    payment_not_available_message:
      'Organizer is not verified to receive payments securely.',
    existing_pending_title: 'Payment session already open',
    existing_pending_message:
      'A pending session already exists for this email. Continue with existing session.',
    sync_not_completed_title: 'Supabase sync not completed',
    sync_not_completed_message:
      'Payment session is active locally, but not saved to DB: {reason}',
    session_not_found_title: 'Session not found',
    session_not_found_message: 'Pending registration not available.',
    payment_already_confirmed_title: 'Payment already confirmed',
    payment_already_confirmed_message: 'This registration is already paid.',
    invalid_state_title: 'Invalid status',
    invalid_state_message: 'Session is no longer payable. Current status: {status}',
    payment_error_title: 'Payment error',
    payment_intent_missing_message: 'Payment intent not linked to registration.',
    payment_intent_not_found_message: 'Payment intent not found.',
    payment_webhook_not_applied_title: 'Payment webhook not applied',
    unknown_error: 'Unknown error.',
    update_error_title: 'Update error',
    update_error_message: 'Updated registration not found.',
    payment_not_completed_title: 'Payment not completed',
    payment_not_completed_message: 'Result: {status}. {reason}\n{sync}',
    retry_payment_reason: 'Try again with a new payment session.',
    sync_state_ok: 'Registration status synced to Supabase.',
    sync_state_fail: 'Supabase sync failed: {reason}',
    payment_confirmed_title: 'Payment confirmed',
    payment_confirmed_message:
      'Registration completed successfully.\nCode: {code}\n{number}{email}\n{sync}',
    sync_paid_ok: 'Paid registration synced to Supabase.',
    registration_cancelled_title: 'Registration cancelled',
    registration_cancelled_message:
      'Pending session has been cancelled successfully.\n{sync}',
    cancellation_sync_ok: 'Cancellation synced to Supabase.',
    fallback_organizer_not_found: 'Organizer not found. Back to role selection.',
    fallback_home: 'Back to home',
    fallback_dashboard_unavailable: 'Dashboard unavailable. Organizer not found.',
    fallback_event_not_found: 'Event not found. Start a new search.',
    fallback_back_search: 'Back to event search',
    fallback_payment_unavailable: 'Payment unavailable. Session not found.',
    supabase_auth_title: 'Supabase Auth',
    missing_payer_name_title: 'Missing data',
    missing_payer_name_message: 'Enter payer name.',
    missing_registration_data_message: 'Enter at least full name and email.',
    payments_blocked_title: 'Payments blocked',
    payments_blocked_unverified:
      'Organizer not verified. Complete anti-fraud verification before creating paid events.',
    iban_missing_title: 'IBAN missing',
    iban_missing_message: 'For paid events, add IBAN in organizer profile.',
    payments_profile_blocked: 'Profile is not verified to receive payments.',
    verification_verified: 'Verified',
    verification_pending_review: 'Under review',
    verification_rejected: 'Rejected',
    verification_suspended: 'Suspended',
    role_dashboard_unavailable: 'Dashboard unavailable. Organizer not found.',
    role_home_action: 'Back to home',
    sync_event_or_organizer_missing: 'Event or organizer not found.',
  },
};

const interpolate = (template: string, params: TranslationParams): string =>
  template.replace(/\{(\w+)\}/g, (_, key: string) => {
    if (!(key in params)) {
      return `{${key}}`;
    }
    return String(params[key]);
  });

export const translate = (
  language: AppLanguage,
  key: string,
  params: TranslationParams = {}
): string => {
  const dictionary = translations[language] ?? translations.it;
  const template = dictionary[key] ?? translations.it[key] ?? key;
  return interpolate(template, params);
};

export const createTranslator = (language: AppLanguage): Translator => {
  return (key: string, params: TranslationParams = {}) => translate(language, key, params);
};
